<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="TennisApp.Views.BluetoothMessagePage"
    Title="Bluetooth Messages"
    BackgroundColor="{StaticResource Background}">

    <Grid RowDefinitions="Auto,*,Auto" Padding="20" RowSpacing="10">
        <!-- Big Connect Button that shows connection status -->
        <Button 
            x:Name="btnStart" 
            Text="Connect" 
            FontSize="24"
            Style="{StaticResource PrimaryButton}"
            Clicked="StartButton_Clicked"
            HeightRequest="60" />

        <!-- History of messages -->
        <CollectionView
            Grid.Row="1"
            x:Name="messagesList"
            Scrolled="MessagesList_Scrolled"
            BackgroundColor="{StaticResource Background}"
            Margin="0,10,0,10">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame
                        CornerRadius="20"
                        Margin="0,4"
                        Padding="12"
                        BackgroundColor="{StaticResource Surface}"
                        HorizontalOptions="Fill"
                        BorderColor="Transparent">
                        <Frame.Triggers>
                            <DataTrigger TargetType="Frame" Binding="{Binding IsNew}" Value="True">
                                <Setter Property="BorderColor" Value="{StaticResource Primary}" />
                            </DataTrigger>
                        </Frame.Triggers>
                        <Label
                            Text="{Binding Text}"
                            TextColor="{StaticResource White}"
                            FontSize="16"
                            LineBreakMode="WordWrap"
                            HorizontalOptions="Start"
                            VerticalOptions="Center"/>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>
